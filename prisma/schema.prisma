generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model User {
  id        Int      @id @default(autoincrement())
  username  String   @unique
  password  String
  createdAt DateTime @default(now())
  files     Files[]
  folders   Folder[]
}

model Files {
  id       Int      @id @default(autoincrement())
  path     String
  size     Int
  fileName String
  mimetype String?
  addedAt  DateTime @default(now())
  userId   Int
  folderId Int
  folder   Folder   @relation(fields: [folderId], references: [id])
  user     User     @relation(fields: [userId], references: [id])
}

model Folder {
  id         Int      @id @default(autoincrement())
  folderName String
  userId     Int
  addedAt    DateTime @default(now())
  user       User     @relation(fields: [userId], references: [id])
  files      Files[]
  shares     Share[]
}

model Share {
  id        Int      @id @default(autoincrement())
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  folderId  Int
  folder    Folder   @relation(fields: [folderId], references: [id])
}
